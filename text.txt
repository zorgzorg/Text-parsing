4.1.4.3 Поддержание механизма транзакций

Поддержание механизма транзакций - показатель уровня развитости СУБД.
Транзакция - это последовательность операторов манипулирования данными, выполняющаяся как единое целое и переводящая базу данных из одного целостного состояния в другое.
Система, поддерживающая процесс транзакции, гарантирует, что если во время выполнения неких обновлений произошла ошибка любой природы, то все эти обновления будут аннулированы. Транзакция или выполняется полностью, или полностью отменяется. В многопользовательских системах транзакции служат для обеспечения изолированной работы отдельных пользователей. Пользователи при одновременной работе с одной и той же базой данных работают как бы в однопользовательском режиме, не мешая друг другу.
Традиционные транзакции обладают четырьмя важными свойствами, известными как ACID: атомарность (Atomicity), согласованность (Consistency), изолированность (Isolation), долговечность (Durability). Традиционные транзакции называют ACID-транзакциями. Рассмотрим свойства ACID.
Свойство атомарности заключается в том, что транзакция должна быть выполнена целиком, либо не выполнена вовсе.
Свойство согласованности гарантирует, что транзакции переводят базу данных из одного согласованного (целостного) состояния в другое без обязательной поддержки согласованности на промежуточных этапах выполнения операторов транзакции.
Свойство изоляции означает, что конкурирующие за доступ к базе данных транзакции физически обрабатываются последовательно, т.е. изолированно друг от друга, но для пользователей это выглядит так, как будто они выполняются параллельно.
Свойство долговечности гарантирует сохранение изменений в БД, произведенных транзакцией, если она успешно завершена. Изменения данных не могут быть потеряны ни при каких обстоятельствах, даже если в следующий момент времени после нормального завершения транзакции произойдет ошибка или системный сбой.
Существуют следующие способы завершения транзакций: фиксация и откат.
Фиксация транзакции - действие, обеспечивающее запись на диск изменений в БД, которые были сделаны в процессе выполнения транзакции. До тех пор пока транзакция не зафиксирована, еще возможно аннулирование изменений и восстановление БД в состояние, предшествующее началу выполнения транзакции. В результате фиксации транзакции все изменения в БД становятся постоянными.
Если в процессе выполнения транзакции возникает исключительная ситуация, которая делает невозможным нормальное завершение данной транзакции, база данных должна быть возвращена в исходное состояние. Откат транзакции  - это   действие, аннулирующее все изменения данных, которые были выполнены операторами SQL в теле текущей незавершенной транзакции.
Стандарт ANSI/ISO SQL определяет, что транзакция начинается с первого выполняемого оператора SQL и заканчивается одним из четырех возможных способов:
1) явной фиксацией или выполнением оператора COMMIT;
2) явным откатом или выполнением оператора ROLLBACK;
3) неявной фиксацией при нормальном завершении программы, в которой была инициирована текущая транзакция;
4) неявным откатом при аварийном завершении программы.